<h1>Your Cart</h1>

<table class="table table-striped" style="background-color: #F0F8FF;">
  <thead>
    <tr>
      <th>Title</th>
      <th>Quantity</th>
      <th>Total Price</th>
      <th colspan="2"></th>
    </tr>
  </thead>
  <tbody>
    <% @cart.cart_items.each do |item| %>
      <tr>
        <td><%= item.book.title %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.total_price) %></td>
        <td><%= link_to 'Edit', edit_cart_item_path(item), class: 'btn btn-warning' %></td>
        <td><%= link_to 'Remove', "/cart_items/#{item.id}", data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: 'btn btn-danger btn-sm' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Total Price: <%= number_to_currency(@cart.cart_items.sum { |item| item.total_price }) %></h2>

<%= link_to 'Checkout', checkout_path, class: 'btn btn-success mt-4' %><br><br>

<%= link_to 'Back', root_path, class: 'btn btn-secondary' %>

